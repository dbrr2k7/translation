<!DOCTYPE html>
{% load staticfiles %}

<html>
<head>
    <meta charset="utf-8">
    <title>Samana</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Bootstrap -->
    <!--link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet"-->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap-switch.js"></script>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-theme.min.css">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/bootstrap-switch.min.css" rel="stylesheet">
    <link href="/static/css/toastr.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <script src="/static/js/bootstrap-switch.js"></script>
    <script src="/static/js/toastr.min.js"></script>
    <!--Font-->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600' rel='stylesheet'
          type='text/css'>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>

        <style type="text/css">
        body {
            background: #F5F5F5;
        }

        .container {
            max-width: 700px;
        }

        #moratab {
            margin-top: 20px;
        }

        @font-face {
            font-family: IRMitra;
            font-weight: normal;
            src: url('/static/style/IRMitra.woff') format('woff');
        }

        #wmd-input, .modal .btn, .modal p {
            font-family: IRMitra;
        }
    </style>
</head>
<body >

<nav class="navbar navbar-inverse " role="navigation" style="width: 100%" >
    <div class="" style="width: 100%; margin :0.7%; margin-bottom: 5.2%">
        <div id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav" style="height: 100%">
                <li>
                    <a class="btn" href="{% url 'firstpage' %}"
                       style="background-color: transparent; color: white;margin-right: 30%; border:solid; border-color: white; padding-right: 20%"><i
                            class="glyphicon glyphicon-home" style="font-size: 200%"></i></a>
                </li>
                <li style="margin-top: 2%">
                    <a class="btn " data-toggle="modal" data-target="#sett-modal"
                       style="background-color:whitesmoke; color: black;margin-right: 20%; padding-right: 15%"><i
                            class="glyphicon glyphicon-cog" style="margin-right: 2%"></i> Setting</a>
                </li>
                <li style="margin-top: 2%">
                    <a class="btn" href="{% url 'notifications' %}" data-toggle="modal" data-target="#notif-modal"
                       style="background-color: whitesmoke; color: black;margin-right: 15%;padding-right: 15%"><i
                            class="glyphicon glyphicon-envelope" style="margin-right: 2%"></i> Notifications</a>
                </li>
                <li style="margin-top: 2%">
                    <a class="btn" href="{% url 'logout' %}" style="background-color: #d9534f; color: white"><i
                            class="glyphicon glyphicon-log-out" style="margin-right: 2%"></i> Sign Out</a>
                </li>
            </ul>

        </div>
        <!-- /.navbar-collapse -->
        <div class="" style="float: right; margin-right: 1.5%">
            <ul class="nav navbar-nav" style="height: 100%">
                <li>
                    <a class="btn" onclick="return false"
                       style="pointer-events: none; background-color: transparent; color: white;margin-right: 30%"><i
                            class="glyphicon glyphicon-user" style="font-size: 200%"> </i>
                        <p style="margin-bottom: -50%">{{ user.username }}</p></a>
                </li>
                <li>
                    <a class="btn" onclick="return false"
                       style="pointer-events: none; background-color: transparent; color: white;margin-right: 30%"><i
                            class="glyphicon glyphicon-flag" style="font-size: 200%"> </i>
                        <p style="margin-bottom: -50%">{{ language }}</p></a>
                </li>

            </ul>
        </div>
    </div>

    <!-- /.container -->
</nav>


{% block content %}{% endblock %}

<div id="sett-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" dir="rtl" align="center">Setting</h4>
            </div>
            <div class="modal-body">

                <div class="container" style="text-align:center">
                    <form action="{% url 'setting' %}" class="form-horizontal" method="POST">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-8" >
                                <div style="width: 159px; float: left" class="bootstrap-switch-container"><span
                                        style="width: 53px;"
                                        class="bootstrap-switch-handle-on bootstrap-switch-primary">Right To Left</span><span
                                        style="width: 53px;" class="bootstrap-switch-label">&nbsp;</span><span
                                        style="width: 53px;"
                                        class="bootstrap-switch-handle-off bootstrap-switch-default"></span><input
                                        id="switch-modal" name= "rtl" checked="" type="checkbox"></div>
                            </div>
                        </div>
                        <hr>
                        <div class="col-md-9">
                            <div class="big-submit-button text-center">
                                <input type="submit" class="btn btn-large btn-primary" value="Save">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align:center">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="notif-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
        </div>
    </div>
</div>
<script>
    $('#switch-modal').bootstrapSwitch();
</script>

</body>
{% block script_panel %}
<script type="text/javascript">
jQuery(document).ready(function($) {
	var ws4redis = WS4Redis({
		uri: '{{ WEBSOCKET_URI }}notifications?subscribe-broadcast&publish-broadcast&echo',
		receive_message: receiveMessage,
		heartbeat_msg: {{ WS4REDIS_HEARTBEAT }}
	});
	var billboard = $('#billboard');

	// send message though the Websocket to the server
	$("#text_message").keydown(function(event) {
		if (event.keyCode === 13) {
			event.preventDefault();
			ws4redis.send_message($('#text_message').val());
		}
	});

	$('#send_message').click(function() {
		ws4redis.send_message($('#text_message').val());
	});

	// receive a message though the Websocket from the server
	function receiveMessage(msg) {
	    $('body').on('hidden.bs.modal', '.modal', function () {
            $(this).removeData('bs.modal');
        });
	    result = msg.split("^");
	    toastr["info"](result[1], result[0]);
	}
});
</script>
{% endblock %}
<script src="{% static 'js/ws4redis.js' %}" type="text/javascript"></script>
</html>
