{% extends "base.html" %}

{% block content %}

    <script type="text/javascript" src="/static/js/marked.js"></script>
    <script type="text/javascript" src="/static/js/simplemde.min.js"></script>
    <script type="text/javascript" src="/static/editor/libs.js"></script>
    <script type="text/javascript" src="/static/editor/syntax.js"></script>
    <script type="text/javascript" src="/static/editor/buttons.js"></script>
    <script type="text/javascript" src="/static/editor/editor.js"></script>
    <script type="text/javascript" src="/static/js/katex.js"></script>
    <script type="text/javascript" src="/static/js/editor-task.js"></script>
    <script type="text/javascript" src="/static/js/auto-render.min.js"></script>

    <link rel="stylesheet" href="/static/css/simplemde.min.css">
    <link rel="stylesheet" href="/static/editor/editor.css">
    <link rel="stylesheet" href="/static/css/katex.css">


    <div class="row">
        <div class="col-sm-12" id="btn-container">
            <div class="panel panel-default">
                <div class="panel-body">

                    <div class="col-sm-6">
                        <input class="form-control" value="{{ title }}" placeholder="Question Title" id="task-title">
                    </div>
                    <div class="col-sm-6">
                        <button class="btn btn-default" onclick="send_data()">Save</button>
                        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Publish Last Version</button>

                        <!-- Modal -->
                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-body">
                                  <textarea class="form-control" id="change-log" placeholder="Change Log Note" rows="12"></textarea>
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="publishLastVersion()">Publish</button>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6" id="left-container">
            <div class="panel panel-default">
                <div class="panel-body">
                    <textarea id="task-markdown">{{ content }}</textarea>
                </div>
            </div>
        </div>

        <div class="col-sm-6" id="right-container">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div id="task-preview" class="text-container"></div>
                </div>
            </div>
        </div>
    </div>



    <script type="text/javascript">
        task_id = {{taskId}};
        save_task_url = "{% url 'savetask' %}";
        publish_task_url = " {% url 'publishtask' %}";
        csrf_token = "{{csrf_token}}";
    </script>

{% endblock %}